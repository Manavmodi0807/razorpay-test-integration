<!DOCTYPE html>
<html>
<head>
    <title>Razorpay Test Payment</title>
</head>
<body>

<h2>Razorpay Test Checkout</h2>

<button id="pay-btn">Pay â‚¹500</button>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script>
var options = {
    "key": "{{ key }}",
    "amount": "{{ order.amount }}",
    "currency": "INR",
    "name": "Secure Django Razorpay",
    "order_id": "{{ order.id }}",
    "handler": function (response){
        fetch("/success/", {
            method: "POST",
            headers: {
                "Content-Type": "application/x-www-form-urlencoded",
            },
            body: new URLSearchParams({
                razorpay_payment_id: response.razorpay_payment_id,
                razorpay_order_id: response.razorpay_order_id,
                razorpay_signature: response.razorpay_signature
            })
        }).then(res => {
            window.location.href = "/success/";
        });
    }
};

var rzp = new Razorpay(options);

document.getElementById('pay-btn').onclick = function(e){
    rzp.open();
    e.preventDefault();
}
</script>

</body>
</html>